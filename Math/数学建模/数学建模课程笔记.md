10周期中作业

15周期末作业

10页以上





# 期中作业（新冠传播模型）

10周时交，要求10页以上（A4大小的页）

群体：发病感染者I，正常人S，抗感者R，潜伏期感染者E，隔离的未治疗感染者Q、隔离的正治疗感染者J等等。（用Excel递推差分方程）

时间：潜伏期、治疗周期 etc

考虑前中后期；//λ 和 μ 是时间 t 的函数，但是很难做到，所以分段为不同阶段的常量考虑

模型要符合数据，数据从WTO等地方找，可以把实际数据和模型数据放一个图里对比。

### 引言

3—4 段，2/3 的 A4 页；不要出现大的表格（用列举）；关键字；

引入（套话）

针对问题一，。。。

针对问题二， 。。。

### 模型假设和符号约定

三线格法

### 模型建立

### 模型求解

### 模型分析（稳定性 etc ）

### 模型推广与应用

### 优缺点

### 参考文献

### 附录 

计算过程、代码

# Matlab

变量名规则同 C 语言

注释：

%%  。。。

%  。。。

%  。。。

……

### 数据类型

###### 

##### 数字

##### 字符和字符串

用 ‘   ’

length 函数

##### 矩阵

A = [ 1 2 3；4 5 6；7 8 9;]

转秩函数

inv ：

zeros ：生成 0 矩阵

rand ：生成随机数矩阵

randi / randn 函数

三冒号：生成等差数列，公差为 1 时可以省略一个冒号

repeat ：生成横竖重复的矩阵

###### 四则运算

//  +  -  .*  ./  ：对应项作运算

//*  /  ：矩阵的运算

##### 元胞数组

可以混搭数据类型的数组，访问用[]，下标从 1 开始

cell 函数：生成 n 行 m 列矩阵

eye 函数：生成单位矩阵

magic 函数：生成幻方矩阵

##### 结构体



#### 结构基础

##### 条件结构

if……elseif……else……end

switch……case……otherwise……end

##### 循环结构

for-end：for 循环变量 = 向量or矩阵	循环体

### 编程序

有解析解的常微分方程（组）均可这样解；

dsolve（‘方程一’，‘方程二’，……‘方程n’，‘初始条件’，‘自变量’）

初始条件eg：y（0）= 1，Dy（0）= 1……

若无解析解：

要么转换为差分方程

要么如下:

对高阶微分方程，可以换元，把高阶转为低阶

##### 具体操作：

先用自定义一个函数 f ，其中要用零矩阵给变量占个内存；

[t, x] = solver( ' f ', ts, x0, options) // sovler:不同的求解法（ode45 etc）; ts:求解区间; options：精度，不管就行；

然后用plot画图

plot（T, Y( : , 1) , ' 用什么图形当点 '，重复前面）

 

# Lingo

# 模型

#### 离散化模型

​	首先用一个矩阵表示，每行对应一个可选项，每列对应一个指标

##### 评估指标：

​	费用型属性、效益型属性、区间型属性

##### 为了保证指标越大越好：

​	对费用型属性作倒数变换：1. 取倒数 2. 标准化（归一化：所有列的和为一、最大化：每列最大的变为一，其他的等比例变换、模一化：类似方向余弦，每个数除以本列的根号下平方和，对每列处理） 

​	区间型暂不讲

##### 确定每列单个元素的权重：

​	决策法和层次分析法（偏主观）

​	信息熵法：$ E_j=-k\Sigma (k\ from\ 1\ to\ i)r_(kj)ln[r(kj)]$ 

##### 列的加权法：

​	加权和法、加权积法（low）

​	理想解法：n个指标视为n维空间 ，有原点、正理想解v+（每个指标都是可选项里最好的）、负理想解v-（同理），然后算每个点到v+、v-的欧氏距离$S_i^+ and\  S_i^-$。相对距离$C_i^+ =\frac{S_i^-}{S_i^+ + S_i^-}$，相对距离最大的就是最优解。

### ”公平的席位分配“

##### 比例加惯例法

有 Alabama 悖论，否决

##### “公平”的标准是什么？

###### 绝对不公平度的（不太合理）

###### 相对不公平度（相对更合理，但不是完全公平）

Q 值：多的席位给 Q 值大的
$$
Q_i=\frac{p_i^2}{n_i(n_i+1)}
$$

## 概率模型

##### 进货问题

进货后售出赚钱，退回亏本，每个周期售出数是有规律的随机（比如X-P表）

## 统计模型

##### 线性回归模型

##### 



下面给出一个 SQEIR 的传染病传播模型，现在我要根据每周感染人数和死亡人数的数据（数据被储存在excel中，地址是"C:\Users\牛鸿宇\Desktop\工作簿1.xlsx"，其中第一列是感染总人数，第二列是死亡总人数）来估算参数，使得模型预测数据和实际数据的偏差最小

基于这样的需求，请你对下面的代码进行改进

clear; clc;

% 参数设置

N = 1400000000; % 人口数

S = N; % 易感染者

Q = 0; % 隔离者

E = 0; % 潜伏者

I = 1; % 传染者

R = 0; % 康复者

a = 20; % 感染者平均每日接触人数

b = 0.03; % 平均感染率

h = a * b; % 传染系数

i = 0.125; % 潜伏者患病概率

r = 0.1; % 康复概率

k = 0.05; % 死亡概率

q = 0.9; % 隔离速率

T = 1:200;

for idx = 1:length(T)-1

​    S(idx+1) = S(idx) - h * I(idx) * S(idx) / N - h * E(idx) * S(idx) / N; % 易感人数迭代

​    Q(idx+1) = Q(idx) + q * I(idx) - r * Q(idx) - k * Q(idx); % 隔离人数迭代

​    E(idx+1) = E(idx) + h * I(idx) * S(idx) / N + h * E(idx) * S(idx) / N - i * E(idx); % 潜伏者人数迭代

​    I(idx+1) = I(idx) + i * E(idx) - r * I(idx) - q * I(idx); % 患病人数迭代

​    R(idx+1) = R(idx) + r * I(idx) + r * Q(idx); % 康复人数迭代

end

plot(T, S, T, Q, T, E, T, I, T, R);

grid on;

xlabel('日期');

ylabel('人数');

legend('易感人数', '隔离人数', '潜伏者', '感染者', '康复者');

title('SQEIR模型');





问题一：先把数据整理为每个单品（品类）每天总销额，求出每天销额平均数，再对两两品类之间
